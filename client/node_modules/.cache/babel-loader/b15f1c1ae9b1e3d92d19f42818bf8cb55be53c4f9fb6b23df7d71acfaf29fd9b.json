{"ast":null,"code":"import React,{useState,useEffect}from'react';import GameHeader from'../components/layout/GameHeader';import GameTable from'../components/game/GameTable';import GameControls from'../components/game/GameControls';import ChatPanel from'../components/game/ChatPanel';import ExchangeModal from'../components/game/ExchangeModal';import{useDragAndDrop}from'../hooks/useDragAndDrop';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GameRoom=_ref=>{var _gameState$players$ga,_gameState$players$ga2;let{socket,gameState,currentPlayer,onLeaveGame}=_ref;const[chatMessage,setChatMessage]=useState('');const[playableCards,setPlayableCards]=useState([]);const[showChat,setShowChat]=useState(false);const[selectedCardsForExchange,setSelectedCardsForExchange]=useState([]);const[showExchangeModal,setShowExchangeModal]=useState(false);const[isTrumpExchange,setIsTrumpExchange]=useState(false);const[botActionMessage,setBotActionMessage]=useState('');const[cardOrder,setCardOrder]=useState([]);const prevPlayersRef=React.useRef(gameState.players);// Update currentPlayer with latest data from gameState\nconst updatedCurrentPlayer=gameState.players.find(player=>player.id===currentPlayer.id)||currentPlayer;// Use drag and drop hook\nconst{draggedCardIndex,handleDragStart,handleDragOver,handleDrop,handleDropToPlay,handleDragEnd}=useDragAndDrop();// Initialize card order when hand changes\nuseEffect(()=>{if(Array.isArray(updatedCurrentPlayer.hand)){// Filter out indices that no longer exist in the hand\nsetCardOrder(prevOrder=>{const handArray=updatedCurrentPlayer.hand;const newOrder=prevOrder.filter(index=>index<handArray.length);// Add any new indices that might have been added\nfor(let i=0;i<handArray.length;i++){if(!newOrder.includes(i)){newOrder.push(i);}}return newOrder;});}},[updatedCurrentPlayer.hand]);useEffect(()=>{if(socket&&gameState.gamePhase==='playing'&&isMyTurn){socket.emit('get_playable_cards',{gameId:gameState.id});}},[socket,gameState.gamePhase,gameState.currentPlayerIndex,updatedCurrentPlayer.id]);useEffect(()=>{if(!socket)return;socket.on('playable_cards',data=>{if(data.gameId===gameState.id){setPlayableCards(data.playableCards);}});return()=>{socket.off('playable_cards');};},[socket,gameState.id,currentPlayer.name]);// Track bot decisions and show notifications\nuseEffect(()=>{const currentPlayer=gameState.players[gameState.currentPlayerIndex];if(currentPlayer!==null&&currentPlayer!==void 0&&currentPlayer.isBot){// Clear any existing bot action message when a new bot starts thinking\nsetBotActionMessage('');}},[gameState.currentPlayerIndex,gameState.players]);// Track when bots make decisions\nuseEffect(()=>{const prevPlayers=prevPlayersRef.current;const currentPlayers=gameState.players;currentPlayers.forEach((player,index)=>{const prevPlayer=prevPlayers[index];if(player.isBot&&prevPlayer&&prevPlayer.enteredRound===undefined&&player.enteredRound!==undefined){const action=player.enteredRound?'entered':'declined';setBotActionMessage(\"\".concat(player.name,\" \").concat(action,\" the round\"));// Clear the message after 3 seconds\nsetTimeout(()=>{setBotActionMessage('');},3000);}// Track exchange decisions\nif(player.isBot&&prevPlayer&&!prevPlayer.hasExchanged&&player.hasExchanged){const action=gameState.gamePhase==='trump_exchanging'?'exchanged trump card':'exchanged cards';setBotActionMessage(\"\".concat(player.name,\" \").concat(action));// Clear the message after 3 seconds\nsetTimeout(()=>{setBotActionMessage('');},3000);}});prevPlayersRef.current=currentPlayers;},[gameState.players]);const handleReady=()=>{if(!socket)return;socket.emit('ready_check',{gameId:gameState.id,isReady:true});};const handleUnready=()=>{if(!socket)return;socket.emit('ready_check',{gameId:gameState.id,isReady:false});};const handleStartGame=()=>{if(!socket)return;socket.emit('start_game',{gameId:gameState.id});};const handleEnterTurn=()=>{if(!socket)return;socket.emit('enter_turn',{gameId:gameState.id});};const handleSkipTurn=()=>{if(!socket)return;socket.emit('skip_turn',{gameId:gameState.id});};const handlePlayCard=cardIndex=>{if(!socket)return;socket.emit('play_card',{gameId:gameState.id,cardIndex});};const handleCardSelectForExchange=cardIndex=>{setSelectedCardsForExchange(prev=>{if(prev.includes(cardIndex)){return prev.filter(index=>index!==cardIndex);}else{if(isTrumpExchange){// For trump exchange, only allow one card selection\nreturn[cardIndex];}else{// For regular exchange, limit to tree size\nconst maxExchangeable=gameState.tree.length;if(prev.length>=maxExchangeable){// If already at max, don't add more cards\nreturn prev;}else{return[...prev,cardIndex];}}}});};const handleExchangeCards=()=>{if(!socket||selectedCardsForExchange.length===0)return;if(isTrumpExchange){// For trump exchange, only exchange the first selected card\nsocket.emit('exchange_trump',{gameId:gameState.id,cardIndex:selectedCardsForExchange[0]});}else{// For regular exchange, validate against tree size\nconst maxExchangeable=gameState.tree.length;if(selectedCardsForExchange.length>maxExchangeable){console.warn(\"Cannot exchange \".concat(selectedCardsForExchange.length,\" cards when only \").concat(maxExchangeable,\" are available in tree\"));return;}socket.emit('exchange_cards',{gameId:gameState.id,cardIndices:selectedCardsForExchange});}setSelectedCardsForExchange([]);setShowExchangeModal(false);setIsTrumpExchange(false);};const handleSkipExchange=()=>{if(!socket)return;if(isTrumpExchange){socket.emit('exchange_trump',{gameId:gameState.id,cardIndex:-1});}else{socket.emit('exchange_cards',{gameId:gameState.id,cardIndices:[]});}setShowExchangeModal(false);setIsTrumpExchange(false);};const handleOpenExchange=()=>{setIsTrumpExchange(false);setSelectedCardsForExchange([]);setShowExchangeModal(true);};const handleOpenTrumpExchange=()=>{setIsTrumpExchange(true);setSelectedCardsForExchange([]);setShowExchangeModal(true);};const handleSkipTrumpExchange=()=>{if(!socket)return;socket.emit('exchange_trump',{gameId:gameState.id,cardIndex:-1});};const handleSendChat=()=>{if(!socket||!chatMessage.trim())return;socket.emit('send_chat',{gameId:gameState.id,message:chatMessage.trim()});setChatMessage('');};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSendChat();}};const isMyTurn=((_gameState$players$ga=gameState.players[gameState.currentPlayerIndex])===null||_gameState$players$ga===void 0?void 0:_gameState$players$ga.id)===updatedCurrentPlayer.id;const canMakeDecision=gameState.gamePhase==='dealing'&&updatedCurrentPlayer.enteredRound===undefined&&isMyTurn;const canExchange=gameState.gamePhase==='exchanging'&&updatedCurrentPlayer.enteredRound===true&&!updatedCurrentPlayer.hasExchanged&&isMyTurn;const canExchangeTrump=gameState.gamePhase==='trump_exchanging'&&updatedCurrentPlayer.enteredRound===true&&updatedCurrentPlayer.isDealer&&((_gameState$players$ga2=gameState.players[gameState.currentPlayerIndex])===null||_gameState$players$ga2===void 0?void 0:_gameState$players$ga2.id)===updatedCurrentPlayer.id;const canPlayCard=gameState.gamePhase==='playing'&&updatedCurrentPlayer.enteredRound===true&&isMyTurn;return/*#__PURE__*/_jsxs(\"div\",{className:\"game-room-new\",children:[/*#__PURE__*/_jsx(GameHeader,{gameState:gameState,onLeaveGame:onLeaveGame}),/*#__PURE__*/_jsx(GameTable,{gameState:gameState,currentPlayer:updatedCurrentPlayer,canPlayCard:canPlayCard,playableCards:playableCards,onDragOver:handleDragOver,onDropToPlay:e=>handleDropToPlay(e,cardOrder,playableCards,handlePlayCard),botActionMessage:botActionMessage}),/*#__PURE__*/_jsx(GameControls,{gameState:gameState,currentPlayer:updatedCurrentPlayer,canMakeDecision:canMakeDecision,canExchange:canExchange,canExchangeTrump:canExchangeTrump,onReady:handleReady,onUnready:handleUnready,onStartGame:handleStartGame,onEnterTurn:handleEnterTurn,onSkipTurn:handleSkipTurn,onOpenExchange:handleOpenExchange,onOpenTrumpExchange:handleOpenTrumpExchange,onSkipExchange:handleSkipExchange,onSkipTrumpExchange:handleSkipTrumpExchange}),/*#__PURE__*/_jsx(ExchangeModal,{showExchangeModal:showExchangeModal,isTrumpExchange:isTrumpExchange,gameState:gameState,currentPlayer:updatedCurrentPlayer,selectedCardsForExchange:selectedCardsForExchange,onCardSelectForExchange:handleCardSelectForExchange,onExchangeCards:handleExchangeCards,onSkipExchange:handleSkipExchange}),/*#__PURE__*/_jsx(ChatPanel,{showChat:showChat,chatMessage:chatMessage,chatMessages:gameState.chatMessages,onToggleChat:()=>setShowChat(!showChat),onSendChat:handleSendChat,onChatMessageChange:setChatMessage,onKeyPress:handleKeyPress})]});};export default GameRoom;","map":{"version":3,"names":["React","useState","useEffect","GameHeader","GameTable","GameControls","ChatPanel","ExchangeModal","useDragAndDrop","jsx","_jsx","jsxs","_jsxs","GameRoom","_ref","_gameState$players$ga","_gameState$players$ga2","socket","gameState","currentPlayer","onLeaveGame","chatMessage","setChatMessage","playableCards","setPlayableCards","showChat","setShowChat","selectedCardsForExchange","setSelectedCardsForExchange","showExchangeModal","setShowExchangeModal","isTrumpExchange","setIsTrumpExchange","botActionMessage","setBotActionMessage","cardOrder","setCardOrder","prevPlayersRef","useRef","players","updatedCurrentPlayer","find","player","id","draggedCardIndex","handleDragStart","handleDragOver","handleDrop","handleDropToPlay","handleDragEnd","Array","isArray","hand","prevOrder","handArray","newOrder","filter","index","length","i","includes","push","gamePhase","isMyTurn","emit","gameId","currentPlayerIndex","on","data","off","name","isBot","prevPlayers","current","currentPlayers","forEach","prevPlayer","enteredRound","undefined","action","concat","setTimeout","hasExchanged","handleReady","isReady","handleUnready","handleStartGame","handleEnterTurn","handleSkipTurn","handlePlayCard","cardIndex","handleCardSelectForExchange","prev","maxExchangeable","tree","handleExchangeCards","console","warn","cardIndices","handleSkipExchange","handleOpenExchange","handleOpenTrumpExchange","handleSkipTrumpExchange","handleSendChat","trim","message","handleKeyPress","e","key","shiftKey","preventDefault","canMakeDecision","canExchange","canExchangeTrump","isDealer","canPlayCard","className","children","onDragOver","onDropToPlay","onReady","onUnready","onStartGame","onEnterTurn","onSkipTurn","onOpenExchange","onOpenTrumpExchange","onSkipExchange","onSkipTrumpExchange","onCardSelectForExchange","onExchangeCards","chatMessages","onToggleChat","onSendChat","onChatMessageChange","onKeyPress"],"sources":["/Users/enkhmendeee/muushig/client/src/pages/GameRoom.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Socket } from 'socket.io-client';\nimport { Player, GameState, ChatMessage } from '../types/game';\nimport { getSuitSymbol } from '../utils/gameUtils';\nimport GameHeader from '../components/layout/GameHeader';\nimport GameTable from '../components/game/GameTable';\nimport GameControls from '../components/game/GameControls';\nimport ChatPanel from '../components/game/ChatPanel';\nimport ExchangeModal from '../components/game/ExchangeModal';\nimport { useDragAndDrop } from '../hooks/useDragAndDrop';\n\nconst GameRoom: React.FC<{\n  socket: Socket | null;\n  gameState: GameState;\n  currentPlayer: Player;\n  onLeaveGame: () => void;\n}> = ({ socket, gameState, currentPlayer, onLeaveGame }) => {\n  const [chatMessage, setChatMessage] = useState('');\n  const [playableCards, setPlayableCards] = useState<number[]>([]);\n  const [showChat, setShowChat] = useState(false);\n  const [selectedCardsForExchange, setSelectedCardsForExchange] = useState<number[]>([]);\n  const [showExchangeModal, setShowExchangeModal] = useState(false);\n  const [isTrumpExchange, setIsTrumpExchange] = useState(false);\n  const [botActionMessage, setBotActionMessage] = useState<string>('');\n  const [cardOrder, setCardOrder] = useState<number[]>([]);\n\n  const prevPlayersRef = React.useRef(gameState.players);\n  \n  // Update currentPlayer with latest data from gameState\n  const updatedCurrentPlayer = gameState.players.find(player => player.id === currentPlayer.id) || currentPlayer;\n\n  // Use drag and drop hook\n  const {\n    draggedCardIndex,\n    handleDragStart,\n    handleDragOver,\n    handleDrop,\n    handleDropToPlay,\n    handleDragEnd\n  } = useDragAndDrop();\n\n  // Initialize card order when hand changes\n  useEffect(() => {\n    if (Array.isArray(updatedCurrentPlayer.hand)) {\n      // Filter out indices that no longer exist in the hand\n      setCardOrder(prevOrder => {\n        const handArray = updatedCurrentPlayer.hand as any[];\n        const newOrder = prevOrder.filter(index => index < handArray.length);\n        // Add any new indices that might have been added\n        for (let i = 0; i < handArray.length; i++) {\n          if (!newOrder.includes(i)) {\n            newOrder.push(i);\n          }\n        }\n        return newOrder;\n      });\n    }\n  }, [updatedCurrentPlayer.hand]);\n\n  useEffect(() => {\n    if (socket && gameState.gamePhase === 'playing' && isMyTurn) {\n      socket.emit('get_playable_cards', { gameId: gameState.id });\n    }\n  }, [socket, gameState.gamePhase, gameState.currentPlayerIndex, updatedCurrentPlayer.id]);\n\n  useEffect(() => {\n    if (!socket) return;\n\n    socket.on('playable_cards', (data: { gameId: string; playableCards: number[] }) => {\n      if (data.gameId === gameState.id) {\n        setPlayableCards(data.playableCards);\n      }\n    });\n\n    return () => {\n      socket.off('playable_cards');\n    };\n  }, [socket, gameState.id, currentPlayer.name]);\n\n  // Track bot decisions and show notifications\n  useEffect(() => {\n    const currentPlayer = gameState.players[gameState.currentPlayerIndex];\n    if (currentPlayer?.isBot) {\n      // Clear any existing bot action message when a new bot starts thinking\n      setBotActionMessage('');\n    }\n  }, [gameState.currentPlayerIndex, gameState.players]);\n\n  // Track when bots make decisions\n  useEffect(() => {\n    const prevPlayers = prevPlayersRef.current;\n    const currentPlayers = gameState.players;\n    \n    currentPlayers.forEach((player, index) => {\n      const prevPlayer = prevPlayers[index];\n      if (player.isBot && \n          prevPlayer && \n          prevPlayer.enteredRound === undefined && \n          player.enteredRound !== undefined) {\n        const action = player.enteredRound ? 'entered' : 'declined';\n        setBotActionMessage(`${player.name} ${action} the round`);\n        \n        // Clear the message after 3 seconds\n        setTimeout(() => {\n          setBotActionMessage('');\n        }, 3000);\n      }\n      \n      // Track exchange decisions\n      if (player.isBot && \n          prevPlayer && \n          !prevPlayer.hasExchanged && \n          player.hasExchanged) {\n        const action = gameState.gamePhase === 'trump_exchanging' ? 'exchanged trump card' : 'exchanged cards';\n        setBotActionMessage(`${player.name} ${action}`);\n        \n        // Clear the message after 3 seconds\n        setTimeout(() => {\n          setBotActionMessage('');\n        }, 3000);\n      }\n    });\n    \n    prevPlayersRef.current = currentPlayers;\n  }, [gameState.players]);\n\n  const handleReady = () => {\n    if (!socket) return;\n    socket.emit('ready_check', { gameId: gameState.id, isReady: true });\n  };\n\n  const handleUnready = () => {\n    if (!socket) return;\n    socket.emit('ready_check', { gameId: gameState.id, isReady: false });\n  };\n\n  const handleStartGame = () => {\n    if (!socket) return;\n    socket.emit('start_game', { gameId: gameState.id });\n  };\n\n  const handleEnterTurn = () => {\n    if (!socket) return;\n    socket.emit('enter_turn', { gameId: gameState.id });\n  };\n\n  const handleSkipTurn = () => {\n    if (!socket) return;\n    socket.emit('skip_turn', { gameId: gameState.id });\n  };\n\n  const handlePlayCard = (cardIndex: number) => {\n    if (!socket) return;\n    socket.emit('play_card', { gameId: gameState.id, cardIndex });\n  };\n\n  const handleCardSelectForExchange = (cardIndex: number) => {\n    setSelectedCardsForExchange(prev => {\n      if (prev.includes(cardIndex)) {\n        return prev.filter(index => index !== cardIndex);\n      } else {\n        if (isTrumpExchange) {\n          // For trump exchange, only allow one card selection\n          return [cardIndex];\n        } else {\n          // For regular exchange, limit to tree size\n          const maxExchangeable = gameState.tree.length;\n          if (prev.length >= maxExchangeable) {\n            // If already at max, don't add more cards\n            return prev;\n          } else {\n            return [...prev, cardIndex];\n          }\n        }\n      }\n    });\n  };\n\n  const handleExchangeCards = () => {\n    if (!socket || selectedCardsForExchange.length === 0) return;\n    \n    if (isTrumpExchange) {\n      // For trump exchange, only exchange the first selected card\n      socket.emit('exchange_trump', { \n        gameId: gameState.id, \n        cardIndex: selectedCardsForExchange[0] \n      });\n    } else {\n      // For regular exchange, validate against tree size\n      const maxExchangeable = gameState.tree.length;\n      if (selectedCardsForExchange.length > maxExchangeable) {\n        console.warn(`Cannot exchange ${selectedCardsForExchange.length} cards when only ${maxExchangeable} are available in tree`);\n        return;\n      }\n      \n      socket.emit('exchange_cards', { \n        gameId: gameState.id, \n        cardIndices: selectedCardsForExchange \n      });\n    }\n    \n    setSelectedCardsForExchange([]);\n    setShowExchangeModal(false);\n    setIsTrumpExchange(false);\n  };\n\n  const handleSkipExchange = () => {\n    if (!socket) return;\n    \n    if (isTrumpExchange) {\n      socket.emit('exchange_trump', { gameId: gameState.id, cardIndex: -1 });\n    } else {\n      socket.emit('exchange_cards', { gameId: gameState.id, cardIndices: [] });\n    }\n    \n    setShowExchangeModal(false);\n    setIsTrumpExchange(false);\n  };\n\n  const handleOpenExchange = () => {\n    setIsTrumpExchange(false);\n    setSelectedCardsForExchange([]);\n    setShowExchangeModal(true);\n  };\n\n  const handleOpenTrumpExchange = () => {\n    setIsTrumpExchange(true);\n    setSelectedCardsForExchange([]);\n    setShowExchangeModal(true);\n  };\n\n  const handleSkipTrumpExchange = () => {\n    if (!socket) return;\n    socket.emit('exchange_trump', { gameId: gameState.id, cardIndex: -1 });\n  };\n\n  const handleSendChat = () => {\n    if (!socket || !chatMessage.trim()) return;\n    socket.emit('send_chat', { gameId: gameState.id, message: chatMessage.trim() });\n    setChatMessage('');\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendChat();\n    }\n  };\n\n  const isMyTurn = gameState.players[gameState.currentPlayerIndex]?.id === updatedCurrentPlayer.id;\n  const canMakeDecision = gameState.gamePhase === 'dealing' && updatedCurrentPlayer.enteredRound === undefined && isMyTurn;\n  const canExchange = gameState.gamePhase === 'exchanging' && updatedCurrentPlayer.enteredRound === true && !updatedCurrentPlayer.hasExchanged && isMyTurn;\n  const canExchangeTrump = gameState.gamePhase === 'trump_exchanging' && updatedCurrentPlayer.enteredRound === true && updatedCurrentPlayer.isDealer && gameState.players[gameState.currentPlayerIndex]?.id === updatedCurrentPlayer.id;\n  const canPlayCard = gameState.gamePhase === 'playing' && updatedCurrentPlayer.enteredRound === true && isMyTurn;\n\n  return (\n    <div className=\"game-room-new\">\n      <GameHeader gameState={gameState} onLeaveGame={onLeaveGame} />\n      \n      <GameTable\n        gameState={gameState}\n        currentPlayer={updatedCurrentPlayer}\n        canPlayCard={canPlayCard}\n        playableCards={playableCards}\n        onDragOver={handleDragOver}\n        onDropToPlay={(e) => handleDropToPlay(e, cardOrder, playableCards, handlePlayCard)}\n        botActionMessage={botActionMessage}\n      />\n\n      <GameControls\n        gameState={gameState}\n        currentPlayer={updatedCurrentPlayer}\n        canMakeDecision={canMakeDecision}\n        canExchange={canExchange}\n        canExchangeTrump={canExchangeTrump}\n        onReady={handleReady}\n        onUnready={handleUnready}\n        onStartGame={handleStartGame}\n        onEnterTurn={handleEnterTurn}\n        onSkipTurn={handleSkipTurn}\n        onOpenExchange={handleOpenExchange}\n        onOpenTrumpExchange={handleOpenTrumpExchange}\n        onSkipExchange={handleSkipExchange}\n        onSkipTrumpExchange={handleSkipTrumpExchange}\n      />\n\n      <ExchangeModal\n        showExchangeModal={showExchangeModal}\n        isTrumpExchange={isTrumpExchange}\n        gameState={gameState}\n        currentPlayer={updatedCurrentPlayer}\n        selectedCardsForExchange={selectedCardsForExchange}\n        onCardSelectForExchange={handleCardSelectForExchange}\n        onExchangeCards={handleExchangeCards}\n        onSkipExchange={handleSkipExchange}\n      />\n\n      <ChatPanel\n        showChat={showChat}\n        chatMessage={chatMessage}\n        chatMessages={gameState.chatMessages}\n        onToggleChat={() => setShowChat(!showChat)}\n        onSendChat={handleSendChat}\n        onChatMessageChange={setChatMessage}\n        onKeyPress={handleKeyPress}\n      />\n    </div>\n  );\n};\n\nexport default GameRoom;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAIlD,MAAO,CAAAC,UAAU,KAAM,iCAAiC,CACxD,MAAO,CAAAC,SAAS,KAAM,8BAA8B,CACpD,MAAO,CAAAC,YAAY,KAAM,iCAAiC,CAC1D,MAAO,CAAAC,SAAS,KAAM,8BAA8B,CACpD,MAAO,CAAAC,aAAa,KAAM,kCAAkC,CAC5D,OAASC,cAAc,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzD,KAAM,CAAAC,QAKJ,CAAGC,IAAA,EAAuD,KAAAC,qBAAA,CAAAC,sBAAA,IAAtD,CAAEC,MAAM,CAAEC,SAAS,CAAEC,aAAa,CAAEC,WAAY,CAAC,CAAAN,IAAA,CACrD,KAAM,CAACO,WAAW,CAAEC,cAAc,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACsB,aAAa,CAAEC,gBAAgB,CAAC,CAAGvB,QAAQ,CAAW,EAAE,CAAC,CAChE,KAAM,CAACwB,QAAQ,CAAEC,WAAW,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAC0B,wBAAwB,CAAEC,2BAA2B,CAAC,CAAG3B,QAAQ,CAAW,EAAE,CAAC,CACtF,KAAM,CAAC4B,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG7B,QAAQ,CAAC,KAAK,CAAC,CACjE,KAAM,CAAC8B,eAAe,CAAEC,kBAAkB,CAAC,CAAG/B,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACgC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGjC,QAAQ,CAAS,EAAE,CAAC,CACpE,KAAM,CAACkC,SAAS,CAAEC,YAAY,CAAC,CAAGnC,QAAQ,CAAW,EAAE,CAAC,CAExD,KAAM,CAAAoC,cAAc,CAAGrC,KAAK,CAACsC,MAAM,CAACpB,SAAS,CAACqB,OAAO,CAAC,CAEtD;AACA,KAAM,CAAAC,oBAAoB,CAAGtB,SAAS,CAACqB,OAAO,CAACE,IAAI,CAACC,MAAM,EAAIA,MAAM,CAACC,EAAE,GAAKxB,aAAa,CAACwB,EAAE,CAAC,EAAIxB,aAAa,CAE9G;AACA,KAAM,CACJyB,gBAAgB,CAChBC,eAAe,CACfC,cAAc,CACdC,UAAU,CACVC,gBAAgB,CAChBC,aACF,CAAC,CAAGzC,cAAc,CAAC,CAAC,CAEpB;AACAN,SAAS,CAAC,IAAM,CACd,GAAIgD,KAAK,CAACC,OAAO,CAACX,oBAAoB,CAACY,IAAI,CAAC,CAAE,CAC5C;AACAhB,YAAY,CAACiB,SAAS,EAAI,CACxB,KAAM,CAAAC,SAAS,CAAGd,oBAAoB,CAACY,IAAa,CACpD,KAAM,CAAAG,QAAQ,CAAGF,SAAS,CAACG,MAAM,CAACC,KAAK,EAAIA,KAAK,CAAGH,SAAS,CAACI,MAAM,CAAC,CACpE;AACA,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGL,SAAS,CAACI,MAAM,CAAEC,CAAC,EAAE,CAAE,CACzC,GAAI,CAACJ,QAAQ,CAACK,QAAQ,CAACD,CAAC,CAAC,CAAE,CACzBJ,QAAQ,CAACM,IAAI,CAACF,CAAC,CAAC,CAClB,CACF,CACA,MAAO,CAAAJ,QAAQ,CACjB,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACf,oBAAoB,CAACY,IAAI,CAAC,CAAC,CAE/BlD,SAAS,CAAC,IAAM,CACd,GAAIe,MAAM,EAAIC,SAAS,CAAC4C,SAAS,GAAK,SAAS,EAAIC,QAAQ,CAAE,CAC3D9C,MAAM,CAAC+C,IAAI,CAAC,oBAAoB,CAAE,CAAEC,MAAM,CAAE/C,SAAS,CAACyB,EAAG,CAAC,CAAC,CAC7D,CACF,CAAC,CAAE,CAAC1B,MAAM,CAAEC,SAAS,CAAC4C,SAAS,CAAE5C,SAAS,CAACgD,kBAAkB,CAAE1B,oBAAoB,CAACG,EAAE,CAAC,CAAC,CAExFzC,SAAS,CAAC,IAAM,CACd,GAAI,CAACe,MAAM,CAAE,OAEbA,MAAM,CAACkD,EAAE,CAAC,gBAAgB,CAAGC,IAAiD,EAAK,CACjF,GAAIA,IAAI,CAACH,MAAM,GAAK/C,SAAS,CAACyB,EAAE,CAAE,CAChCnB,gBAAgB,CAAC4C,IAAI,CAAC7C,aAAa,CAAC,CACtC,CACF,CAAC,CAAC,CAEF,MAAO,IAAM,CACXN,MAAM,CAACoD,GAAG,CAAC,gBAAgB,CAAC,CAC9B,CAAC,CACH,CAAC,CAAE,CAACpD,MAAM,CAAEC,SAAS,CAACyB,EAAE,CAAExB,aAAa,CAACmD,IAAI,CAAC,CAAC,CAE9C;AACApE,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,aAAa,CAAGD,SAAS,CAACqB,OAAO,CAACrB,SAAS,CAACgD,kBAAkB,CAAC,CACrE,GAAI/C,aAAa,SAAbA,aAAa,WAAbA,aAAa,CAAEoD,KAAK,CAAE,CACxB;AACArC,mBAAmB,CAAC,EAAE,CAAC,CACzB,CACF,CAAC,CAAE,CAAChB,SAAS,CAACgD,kBAAkB,CAAEhD,SAAS,CAACqB,OAAO,CAAC,CAAC,CAErD;AACArC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAsE,WAAW,CAAGnC,cAAc,CAACoC,OAAO,CAC1C,KAAM,CAAAC,cAAc,CAAGxD,SAAS,CAACqB,OAAO,CAExCmC,cAAc,CAACC,OAAO,CAAC,CAACjC,MAAM,CAAEe,KAAK,GAAK,CACxC,KAAM,CAAAmB,UAAU,CAAGJ,WAAW,CAACf,KAAK,CAAC,CACrC,GAAIf,MAAM,CAAC6B,KAAK,EACZK,UAAU,EACVA,UAAU,CAACC,YAAY,GAAKC,SAAS,EACrCpC,MAAM,CAACmC,YAAY,GAAKC,SAAS,CAAE,CACrC,KAAM,CAAAC,MAAM,CAAGrC,MAAM,CAACmC,YAAY,CAAG,SAAS,CAAG,UAAU,CAC3D3C,mBAAmB,IAAA8C,MAAA,CAAItC,MAAM,CAAC4B,IAAI,MAAAU,MAAA,CAAID,MAAM,cAAY,CAAC,CAEzD;AACAE,UAAU,CAAC,IAAM,CACf/C,mBAAmB,CAAC,EAAE,CAAC,CACzB,CAAC,CAAE,IAAI,CAAC,CACV,CAEA;AACA,GAAIQ,MAAM,CAAC6B,KAAK,EACZK,UAAU,EACV,CAACA,UAAU,CAACM,YAAY,EACxBxC,MAAM,CAACwC,YAAY,CAAE,CACvB,KAAM,CAAAH,MAAM,CAAG7D,SAAS,CAAC4C,SAAS,GAAK,kBAAkB,CAAG,sBAAsB,CAAG,iBAAiB,CACtG5B,mBAAmB,IAAA8C,MAAA,CAAItC,MAAM,CAAC4B,IAAI,MAAAU,MAAA,CAAID,MAAM,CAAE,CAAC,CAE/C;AACAE,UAAU,CAAC,IAAM,CACf/C,mBAAmB,CAAC,EAAE,CAAC,CACzB,CAAC,CAAE,IAAI,CAAC,CACV,CACF,CAAC,CAAC,CAEFG,cAAc,CAACoC,OAAO,CAAGC,cAAc,CACzC,CAAC,CAAE,CAACxD,SAAS,CAACqB,OAAO,CAAC,CAAC,CAEvB,KAAM,CAAA4C,WAAW,CAAGA,CAAA,GAAM,CACxB,GAAI,CAAClE,MAAM,CAAE,OACbA,MAAM,CAAC+C,IAAI,CAAC,aAAa,CAAE,CAAEC,MAAM,CAAE/C,SAAS,CAACyB,EAAE,CAAEyC,OAAO,CAAE,IAAK,CAAC,CAAC,CACrE,CAAC,CAED,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,GAAI,CAACpE,MAAM,CAAE,OACbA,MAAM,CAAC+C,IAAI,CAAC,aAAa,CAAE,CAAEC,MAAM,CAAE/C,SAAS,CAACyB,EAAE,CAAEyC,OAAO,CAAE,KAAM,CAAC,CAAC,CACtE,CAAC,CAED,KAAM,CAAAE,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAI,CAACrE,MAAM,CAAE,OACbA,MAAM,CAAC+C,IAAI,CAAC,YAAY,CAAE,CAAEC,MAAM,CAAE/C,SAAS,CAACyB,EAAG,CAAC,CAAC,CACrD,CAAC,CAED,KAAM,CAAA4C,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAI,CAACtE,MAAM,CAAE,OACbA,MAAM,CAAC+C,IAAI,CAAC,YAAY,CAAE,CAAEC,MAAM,CAAE/C,SAAS,CAACyB,EAAG,CAAC,CAAC,CACrD,CAAC,CAED,KAAM,CAAA6C,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI,CAACvE,MAAM,CAAE,OACbA,MAAM,CAAC+C,IAAI,CAAC,WAAW,CAAE,CAAEC,MAAM,CAAE/C,SAAS,CAACyB,EAAG,CAAC,CAAC,CACpD,CAAC,CAED,KAAM,CAAA8C,cAAc,CAAIC,SAAiB,EAAK,CAC5C,GAAI,CAACzE,MAAM,CAAE,OACbA,MAAM,CAAC+C,IAAI,CAAC,WAAW,CAAE,CAAEC,MAAM,CAAE/C,SAAS,CAACyB,EAAE,CAAE+C,SAAU,CAAC,CAAC,CAC/D,CAAC,CAED,KAAM,CAAAC,2BAA2B,CAAID,SAAiB,EAAK,CACzD9D,2BAA2B,CAACgE,IAAI,EAAI,CAClC,GAAIA,IAAI,CAAChC,QAAQ,CAAC8B,SAAS,CAAC,CAAE,CAC5B,MAAO,CAAAE,IAAI,CAACpC,MAAM,CAACC,KAAK,EAAIA,KAAK,GAAKiC,SAAS,CAAC,CAClD,CAAC,IAAM,CACL,GAAI3D,eAAe,CAAE,CACnB;AACA,MAAO,CAAC2D,SAAS,CAAC,CACpB,CAAC,IAAM,CACL;AACA,KAAM,CAAAG,eAAe,CAAG3E,SAAS,CAAC4E,IAAI,CAACpC,MAAM,CAC7C,GAAIkC,IAAI,CAAClC,MAAM,EAAImC,eAAe,CAAE,CAClC;AACA,MAAO,CAAAD,IAAI,CACb,CAAC,IAAM,CACL,MAAO,CAAC,GAAGA,IAAI,CAAEF,SAAS,CAAC,CAC7B,CACF,CACF,CACF,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAK,mBAAmB,CAAGA,CAAA,GAAM,CAChC,GAAI,CAAC9E,MAAM,EAAIU,wBAAwB,CAAC+B,MAAM,GAAK,CAAC,CAAE,OAEtD,GAAI3B,eAAe,CAAE,CACnB;AACAd,MAAM,CAAC+C,IAAI,CAAC,gBAAgB,CAAE,CAC5BC,MAAM,CAAE/C,SAAS,CAACyB,EAAE,CACpB+C,SAAS,CAAE/D,wBAAwB,CAAC,CAAC,CACvC,CAAC,CAAC,CACJ,CAAC,IAAM,CACL;AACA,KAAM,CAAAkE,eAAe,CAAG3E,SAAS,CAAC4E,IAAI,CAACpC,MAAM,CAC7C,GAAI/B,wBAAwB,CAAC+B,MAAM,CAAGmC,eAAe,CAAE,CACrDG,OAAO,CAACC,IAAI,oBAAAjB,MAAA,CAAoBrD,wBAAwB,CAAC+B,MAAM,sBAAAsB,MAAA,CAAoBa,eAAe,0BAAwB,CAAC,CAC3H,OACF,CAEA5E,MAAM,CAAC+C,IAAI,CAAC,gBAAgB,CAAE,CAC5BC,MAAM,CAAE/C,SAAS,CAACyB,EAAE,CACpBuD,WAAW,CAAEvE,wBACf,CAAC,CAAC,CACJ,CAEAC,2BAA2B,CAAC,EAAE,CAAC,CAC/BE,oBAAoB,CAAC,KAAK,CAAC,CAC3BE,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAC,CAED,KAAM,CAAAmE,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,GAAI,CAAClF,MAAM,CAAE,OAEb,GAAIc,eAAe,CAAE,CACnBd,MAAM,CAAC+C,IAAI,CAAC,gBAAgB,CAAE,CAAEC,MAAM,CAAE/C,SAAS,CAACyB,EAAE,CAAE+C,SAAS,CAAE,CAAC,CAAE,CAAC,CAAC,CACxE,CAAC,IAAM,CACLzE,MAAM,CAAC+C,IAAI,CAAC,gBAAgB,CAAE,CAAEC,MAAM,CAAE/C,SAAS,CAACyB,EAAE,CAAEuD,WAAW,CAAE,EAAG,CAAC,CAAC,CAC1E,CAEApE,oBAAoB,CAAC,KAAK,CAAC,CAC3BE,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAC,CAED,KAAM,CAAAoE,kBAAkB,CAAGA,CAAA,GAAM,CAC/BpE,kBAAkB,CAAC,KAAK,CAAC,CACzBJ,2BAA2B,CAAC,EAAE,CAAC,CAC/BE,oBAAoB,CAAC,IAAI,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAuE,uBAAuB,CAAGA,CAAA,GAAM,CACpCrE,kBAAkB,CAAC,IAAI,CAAC,CACxBJ,2BAA2B,CAAC,EAAE,CAAC,CAC/BE,oBAAoB,CAAC,IAAI,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAwE,uBAAuB,CAAGA,CAAA,GAAM,CACpC,GAAI,CAACrF,MAAM,CAAE,OACbA,MAAM,CAAC+C,IAAI,CAAC,gBAAgB,CAAE,CAAEC,MAAM,CAAE/C,SAAS,CAACyB,EAAE,CAAE+C,SAAS,CAAE,CAAC,CAAE,CAAC,CAAC,CACxE,CAAC,CAED,KAAM,CAAAa,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI,CAACtF,MAAM,EAAI,CAACI,WAAW,CAACmF,IAAI,CAAC,CAAC,CAAE,OACpCvF,MAAM,CAAC+C,IAAI,CAAC,WAAW,CAAE,CAAEC,MAAM,CAAE/C,SAAS,CAACyB,EAAE,CAAE8D,OAAO,CAAEpF,WAAW,CAACmF,IAAI,CAAC,CAAE,CAAC,CAAC,CAC/ElF,cAAc,CAAC,EAAE,CAAC,CACpB,CAAC,CAED,KAAM,CAAAoF,cAAc,CAAIC,CAAsB,EAAK,CACjD,GAAIA,CAAC,CAACC,GAAG,GAAK,OAAO,EAAI,CAACD,CAAC,CAACE,QAAQ,CAAE,CACpCF,CAAC,CAACG,cAAc,CAAC,CAAC,CAClBP,cAAc,CAAC,CAAC,CAClB,CACF,CAAC,CAED,KAAM,CAAAxC,QAAQ,CAAG,EAAAhD,qBAAA,CAAAG,SAAS,CAACqB,OAAO,CAACrB,SAAS,CAACgD,kBAAkB,CAAC,UAAAnD,qBAAA,iBAA/CA,qBAAA,CAAiD4B,EAAE,IAAKH,oBAAoB,CAACG,EAAE,CAChG,KAAM,CAAAoE,eAAe,CAAG7F,SAAS,CAAC4C,SAAS,GAAK,SAAS,EAAItB,oBAAoB,CAACqC,YAAY,GAAKC,SAAS,EAAIf,QAAQ,CACxH,KAAM,CAAAiD,WAAW,CAAG9F,SAAS,CAAC4C,SAAS,GAAK,YAAY,EAAItB,oBAAoB,CAACqC,YAAY,GAAK,IAAI,EAAI,CAACrC,oBAAoB,CAAC0C,YAAY,EAAInB,QAAQ,CACxJ,KAAM,CAAAkD,gBAAgB,CAAG/F,SAAS,CAAC4C,SAAS,GAAK,kBAAkB,EAAItB,oBAAoB,CAACqC,YAAY,GAAK,IAAI,EAAIrC,oBAAoB,CAAC0E,QAAQ,EAAI,EAAAlG,sBAAA,CAAAE,SAAS,CAACqB,OAAO,CAACrB,SAAS,CAACgD,kBAAkB,CAAC,UAAAlD,sBAAA,iBAA/CA,sBAAA,CAAiD2B,EAAE,IAAKH,oBAAoB,CAACG,EAAE,CACrO,KAAM,CAAAwE,WAAW,CAAGjG,SAAS,CAAC4C,SAAS,GAAK,SAAS,EAAItB,oBAAoB,CAACqC,YAAY,GAAK,IAAI,EAAId,QAAQ,CAE/G,mBACEnD,KAAA,QAAKwG,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B3G,IAAA,CAACP,UAAU,EAACe,SAAS,CAAEA,SAAU,CAACE,WAAW,CAAEA,WAAY,CAAE,CAAC,cAE9DV,IAAA,CAACN,SAAS,EACRc,SAAS,CAAEA,SAAU,CACrBC,aAAa,CAAEqB,oBAAqB,CACpC2E,WAAW,CAAEA,WAAY,CACzB5F,aAAa,CAAEA,aAAc,CAC7B+F,UAAU,CAAExE,cAAe,CAC3ByE,YAAY,CAAGZ,CAAC,EAAK3D,gBAAgB,CAAC2D,CAAC,CAAExE,SAAS,CAAEZ,aAAa,CAAEkE,cAAc,CAAE,CACnFxD,gBAAgB,CAAEA,gBAAiB,CACpC,CAAC,cAEFvB,IAAA,CAACL,YAAY,EACXa,SAAS,CAAEA,SAAU,CACrBC,aAAa,CAAEqB,oBAAqB,CACpCuE,eAAe,CAAEA,eAAgB,CACjCC,WAAW,CAAEA,WAAY,CACzBC,gBAAgB,CAAEA,gBAAiB,CACnCO,OAAO,CAAErC,WAAY,CACrBsC,SAAS,CAAEpC,aAAc,CACzBqC,WAAW,CAAEpC,eAAgB,CAC7BqC,WAAW,CAAEpC,eAAgB,CAC7BqC,UAAU,CAAEpC,cAAe,CAC3BqC,cAAc,CAAEzB,kBAAmB,CACnC0B,mBAAmB,CAAEzB,uBAAwB,CAC7C0B,cAAc,CAAE5B,kBAAmB,CACnC6B,mBAAmB,CAAE1B,uBAAwB,CAC9C,CAAC,cAEF5F,IAAA,CAACH,aAAa,EACZsB,iBAAiB,CAAEA,iBAAkB,CACrCE,eAAe,CAAEA,eAAgB,CACjCb,SAAS,CAAEA,SAAU,CACrBC,aAAa,CAAEqB,oBAAqB,CACpCb,wBAAwB,CAAEA,wBAAyB,CACnDsG,uBAAuB,CAAEtC,2BAA4B,CACrDuC,eAAe,CAAEnC,mBAAoB,CACrCgC,cAAc,CAAE5B,kBAAmB,CACpC,CAAC,cAEFzF,IAAA,CAACJ,SAAS,EACRmB,QAAQ,CAAEA,QAAS,CACnBJ,WAAW,CAAEA,WAAY,CACzB8G,YAAY,CAAEjH,SAAS,CAACiH,YAAa,CACrCC,YAAY,CAAEA,CAAA,GAAM1G,WAAW,CAAC,CAACD,QAAQ,CAAE,CAC3C4G,UAAU,CAAE9B,cAAe,CAC3B+B,mBAAmB,CAAEhH,cAAe,CACpCiH,UAAU,CAAE7B,cAAe,CAC5B,CAAC,EACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7F,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}