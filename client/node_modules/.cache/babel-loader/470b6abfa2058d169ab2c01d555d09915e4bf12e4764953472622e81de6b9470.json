{"ast":null,"code":"import _objectSpread from\"/Users/enkhmendeee/muushig/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{io}from'socket.io-client';import'./App.css';import HomePage from'./pages/HomePage';import GameRoom from'./pages/GameRoom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// Main App Component\nfunction App(){const[socket,setSocket]=useState(null);const[gameState,setGameState]=useState(null);const[currentPlayer,setCurrentPlayer]=useState(null);const[isConnected,setIsConnected]=useState(false);useEffect(()=>{const newSocket=io('http://localhost:3000');setSocket(newSocket);newSocket.on('connect',()=>{setIsConnected(true);});newSocket.on('disconnect',()=>{setIsConnected(false);});newSocket.on('game_created',data=>{setCurrentPlayer(data.player);});newSocket.on('game_joined',data=>{setCurrentPlayer(data.player);});newSocket.on('game_state',state=>{setGameState(state);});newSocket.on('chat_message',message=>{// Update game state with new chat message\nsetGameState(prevState=>{if(!prevState)return prevState;return _objectSpread(_objectSpread({},prevState),{},{chatMessages:[...prevState.chatMessages,message]});});});newSocket.on('dealt_cards',data=>{// Cards dealt\n});newSocket.on('house_completed',data=>{// House completed\n});newSocket.on('game_ended',data=>{// Game ended\n});return()=>{newSocket.close();};},[]);const handleLeaveGame=()=>{if(socket&&gameState){socket.emit('leave_game',{gameId:gameState.id});}setGameState(null);setCurrentPlayer(null);};if(!isConnected){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Connecting to server...\"})]});}if(gameState&&currentPlayer){return/*#__PURE__*/_jsx(GameRoom,{socket:socket,gameState:gameState,currentPlayer:currentPlayer,onLeaveGame:handleLeaveGame});}return/*#__PURE__*/_jsx(HomePage,{socket:socket});}export default App;","map":{"version":3,"names":["React","useState","useEffect","io","HomePage","GameRoom","jsx","_jsx","jsxs","_jsxs","App","socket","setSocket","gameState","setGameState","currentPlayer","setCurrentPlayer","isConnected","setIsConnected","newSocket","on","data","player","state","message","prevState","_objectSpread","chatMessages","close","handleLeaveGame","emit","gameId","id","className","children","onLeaveGame"],"sources":["/Users/enkhmendeee/muushig/client/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { io, Socket } from 'socket.io-client';\nimport './App.css';\nimport HomePage from './pages/HomePage';\nimport GameRoom from './pages/GameRoom';\nimport { Player, Card, GameState, ChatMessage } from './types/game';\n\n// Main App Component\nfunction App() {\n  const [socket, setSocket] = useState<Socket | null>(null);\n  const [gameState, setGameState] = useState<GameState | null>(null);\n  const [currentPlayer, setCurrentPlayer] = useState<Player | null>(null);\n  const [isConnected, setIsConnected] = useState(false);\n\n  useEffect(() => {\n    const newSocket = io('http://localhost:3000');\n    setSocket(newSocket);\n\n    newSocket.on('connect', () => {\n      setIsConnected(true);\n    });\n\n    newSocket.on('disconnect', () => {\n      setIsConnected(false);\n    });\n\n    newSocket.on('game_created', (data: { gameId: string; player: Player }) => {\n      setCurrentPlayer(data.player);\n    });\n\n    newSocket.on('game_joined', (data: { gameId: string; player: Player }) => {\n      setCurrentPlayer(data.player);\n    });\n\n    newSocket.on('game_state', (state: GameState) => {\n      setGameState(state);\n    });\n\n    newSocket.on('chat_message', (message: ChatMessage) => {\n      // Update game state with new chat message\n      setGameState(prevState => {\n        if (!prevState) return prevState;\n        return {\n          ...prevState,\n          chatMessages: [...prevState.chatMessages, message]\n        };\n      });\n    });\n\n    newSocket.on('dealt_cards', (data: { gameId: string; trumpCard: Card }) => {\n      // Cards dealt\n    });\n\n    newSocket.on('house_completed', (data: { house: any; winner: Player }) => {\n      // House completed\n    });\n\n    newSocket.on('game_ended', (data: { winner: Player }) => {\n      // Game ended\n    });\n\n    return () => {\n      newSocket.close();\n    };\n  }, []);\n\n  const handleLeaveGame = () => {\n    if (socket && gameState) {\n      socket.emit('leave_game', { gameId: gameState.id });\n    }\n    setGameState(null);\n    setCurrentPlayer(null);\n  };\n\n  if (!isConnected) {\n    return (\n      <div className=\"loading\">\n        <div className=\"spinner\"></div>\n        <p>Connecting to server...</p>\n      </div>\n    );\n  }\n\n  if (gameState && currentPlayer) {\n    return (\n      <GameRoom\n        socket={socket}\n        gameState={gameState}\n        currentPlayer={currentPlayer}\n        onLeaveGame={handleLeaveGame}\n      />\n    );\n  }\n\n  return (\n    <HomePage\n      socket={socket}\n    />\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}